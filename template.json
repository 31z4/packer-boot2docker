{
  "variables": {
    "iso_target_path": "packer_cache/boot2docker.iso",
    "version": "17.09.0"
  },

  "builders": [{
    "type": "virtualbox-iso",
    "name": "{{user `build`}}",

    "iso_url": "https://github.com/boot2docker/boot2docker/releases/download/v{{user `version`}}-ce/boot2docker.iso",
    "iso_checksum": "ed3804a24e4ae587bc1637404b682908cccdfc0ded04f7b5c457f9357a1c334d8c70e83836a00920b8498774401391190589ff08ae187a9c14a68e8868aa0618",
    "iso_checksum_type": "sha512",
    "iso_target_path": "{{user `iso_target_path`}}",

    "guest_os_type": "Linux_64",
    "guest_additions_mode": "disable",
    "shutdown_command": "sudo poweroff",
    "headless": true,

    "ssh_username": "docker",
    "ssh_password": "tcuser"
  }],

  "provisioners": [{
    "type": "shell",
    "inline": ["mkfs.ext4 -F -L boot2docker-data /dev/sda"]
  }],

  "post-processors": [[
    {
      "type": "vagrant",
      "include": ["{{user `iso_target_path`}}"],
      "vagrantfile_template": "vagrantfile.tpl"
    },
    {
      "type": "vagrant-cloud",
      "access_token": "{{user `access_token`}}",
      "box_tag": "{{user `box_tag`}}",
      "version": "{{user `version`}}",
      "version_description": "Boot2Docker version {{user `version`}}-ce"
    }
  ]]
}
