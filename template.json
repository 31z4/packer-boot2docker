{
  "variables": {
    "iso_target_path": "packer_cache/boot2docker.iso",
    "version": "17.10.0"
  },

  "builders": [{
    "type": "virtualbox-iso",
    "name": "{{user `build`}}",

    "iso_url": "https://github.com/boot2docker/boot2docker/releases/download/v{{user `version`}}-ce/boot2docker.iso",
    "iso_checksum": "954077024339c64307e303e30bb4db8fba78930487df3d040089472d323e8b72056907de5b8a247a752ce2b8c5e8a83de78ae5a34e6894a44b7b28bd9f10b8df",
    "iso_checksum_type": "sha512",
    "iso_target_path": "{{user `iso_target_path`}}",

    "guest_os_type": "Linux_64",
    "guest_additions_mode": "disable",
    "shutdown_command": "sudo poweroff",
    "headless": true,

    "ssh_username": "docker",
    "ssh_password": "tcuser"
  }],

  "provisioners": [{
    "type": "shell",
    "inline": ["mkfs.ext4 -F -L boot2docker-data /dev/sda"]
  }],

  "post-processors": [[
    {
      "type": "vagrant",
      "include": ["{{user `iso_target_path`}}"],
      "vagrantfile_template": "vagrantfile.tpl"
    },
    {
      "type": "vagrant-cloud",
      "access_token": "{{user `access_token`}}",
      "box_tag": "{{user `box_tag`}}",
      "version": "{{user `version`}}",
      "version_description": "Boot2Docker version {{user `version`}}-ce"
    }
  ]]
}
